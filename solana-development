#!/usr/bin/env bash

SESSION="solana-development"
PROJECT_DIR="$HOME/development/solana-bootcamp/9-Token-Lottery/anchor"

tmux has-session -t "$SESSION" 2>/dev/null

if [ $? != 0 ]; then
  # Create session + first window
  tmux new-session -d -s "$SESSION" -c "$PROJECT_DIR" -n editor

  # Window 0: editor (two panes)
  tmux split-window -h -t "$SESSION:editor" -c "$PROJECT_DIR"

  # Window 1: tests (idle)
  tmux new-window -t "$SESSION" -n test -c "$PROJECT_DIR"

  # Window 2: validator (idle)
  tmux new-window -t "$SESSION" -n validator -c "$PROJECT_DIR"

  # Window 3: ops
  tmux new-window -t "$SESSION" -n ops -c "$PROJECT_DIR"

  # Focus editor window
  tmux select-window -t "$SESSION:editor"
fi

tmux attach -t "$SESSION"

